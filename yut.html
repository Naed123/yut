<!DOCTYPE html>
<html>
    <link rel="stylesheet" href ="yut.css">
    <head>
        <title>Yut Nori</title>
        <h1 id="head">Welcome to Yut Nori</h1>
        <h2 id="head2">Please Press Start to Continue</h2>
    </head>
    
    <body>
        <!--Map-->
        <img src="floor.png" alt="opps something went wrong" style="width:800px;height:800px;" class="map">
        
        
        <button id="btn" class="btnMain" type="button" style="border-radius: 12px" onclick="start()">Start</button>
        <h2 id="resultBox" style="position: absolute; left: 850px; top: 350px;">You have rolled: </h2>
        
        
        
        <button id="rollAgain" class="rollAgain" style ="visibility: hidden; border-radius: 12px;">Roll Again</button>

      
         <!-- Trigger/Open The Modal (instructions) -->
         <button id="howtoplay" style="border-radius: 12px;">How to Play</button>
         <!-- The Modal -->
         <div id="howtoplaymodal" class="modal">
             <!-- Modal content -->  
             <div class="modal-content">
                 <span class="close">&times;</span>
                    <p>Game Setup: The game consists of 1 game board, 4 sticks, and 8 board pieces. The sticks determine the spaces each team can move while each team gets 4 of the 8 board pieces.</p>
                    <p>Gameplay: At the start of each turn, a player from a team rolls the sticks. The player then has the option to move the amount of spaces determined by the stick roll or to introduce a new piece to the gameboard and move that piece the amount of spaces determined by the stick roll.</p>
                    <p>Moving Options: Players must move following the arrows along the board. Players can only change direction diagonally when the piece lands on a corner circle. </p>
                    <p>Capturing Pieces: If one team's piece lands on another team's piece or must pass over a space containg the other team's piece to finish their turn, the other teams piece becomes captured. The captured piece goes back into the team's bank and can be used to start from the beginning.</p>
            </div>
        </div>
        
        <div id="repeatModal" class="modalRepeat">
             <!-- Modal content -->  
             <div>
                 <h2 id="modalHead"></h2>
                 <h3 id="modalText">Please choose a piece to move</h3>
                 <button id = "piece1">1</button>
                 <button id = "piece2">2</button>
                 <button id = "piece3">3</button>
                 <button id = "piece4">4</button>
                 <h3 id="modalChoice">How many spaces would you like to move that piece?</h3>
                 <button id = "choice1"></button>
                 <button id = "choice2"></button>
            </div>
        </div>
        
        <script>
            var mal_pos = [1,1,1,1,1,1,1];
            var t = 0;
            var res = [];
            var left = 0;
            var top = 0;
            var again = [];
        
            function start() {
                //Start of the infinite loop(red first)
                if (t == 0){
                    document.getElementById("btn").innerHTML = "Roll";
                    document.getElementById("head2").innerHTML = "Please click the button to roll your Yut";
                    document.getElementById("head").innerHTML = "Red's turn";
                    document.getElementById("head").style.color="red"
                    document.getElementById("resultBox").innerHTML = "Result is :"
                    for (let i =0; i < 4; i++){
                            var img = document.createElement("img");
                            img.src= "question.png";
                            img.style.height = "245px";
                            img.style.width = "80px";
                            //display on a table
                            let x = document.getElementById("yut").rows[0].cells;
                            x[i+1].innerHTML = "";
                            x[i+1].appendChild(img);
                    }
                    t = 1;
                }
                else if (t==1){
                    //When roll is pressed(red's turn)
                    document.getElementById("btn").innerHTML = "End Turn";
                    document.getElementById("head2").innerHTML = "Please click the button to end your turn";
                    again = [];
                    roll();
                    show_result();
                    let spaces = result();
                    
                    if (spaces != 4 && spaces != 5 && spaces != -1){
                        mal_pos[4] += spaces;
                        move(mal_pos[4],"r1");
                    }
                    else if (spaces == 4 || spaces == 5){
                        again[0] = spaces;
                        document.getElementById("btn").disabled = true;
                        document.getElementById("rollAgain").style.visibility = "visible";
                        document.getElementById("rollAgain").onclick = function() {rollAg()};
                    }
                    
                    
                    t = 2;
                  
                }
                else if (t==2){
                    document.getElementById("btn").innerHTML = "Roll";
                    document.getElementById("head2").innerHTML = "Please click the button to roll your Yut";
                    document.getElementById("head").innerHTML = "Blue's turn";
                    document.getElementById("head").style.color="blue"
                    document.getElementById("resultBox").innerHTML = "Result is :"
                    for (let i =0; i < 4; i++){
                            var img = document.createElement("img");
                            img.src= "question.png";
                            img.style.height = "245px";
                            img.style.width = "80px";
                            //display on a table
                            let x = document.getElementById("yut").rows[0].cells;
                            x[i+1].innerHTML = "";
                            x[i+1].appendChild(img);
                    }
                    t = 3;
                }
                else if (t==3){
                    document.getElementById("btn").innerHTML = "End Turn";
                    document.getElementById("head2").innerHTML = "Please click the button to end your turn";
                    again = [];
                    roll();
                    show_result();
                    let spaces = result();
                    
                    if (spaces != 4 && spaces != 5 && spaces != -1){
                        mal_pos[0] += spaces;
                        move(mal_pos[0],"b1");
                    }
                    else if (spaces == 4 || spaces == 5){
                        again[0] = spaces;
                        document.getElementById("btn").disabled = true;
                        document.getElementById("rollAgain").style.visibility = "visible";
                        document.getElementById("rollAgain").onclick = function() {rollAg()};
                    }
                    
                    
                    
                    t = 0;
                
                }   
            }
            
            
            
            
            function rollAg(){
                roll();
                show_result();
                again[1] = result();

               // document.getElementById("btn").disabled = false;
                document.getElementById("rollAgain").style.visibility = "hidden";
                
                var modal = document.getElementById("repeatModal");
                setTimeout(() => {  modal.style.display = "block"; }, 2000);
                document.getElementById("modalHead").innerHTML = "Result for all Rolls(spaces): " + again[0] + " & " + again[1];
                document.getElementById("choice1").innerHTML = again[0];
                document.getElementById("choice2").innerHTML = again[1];
            }
            
            
            
            
            //return spaces need to be moved
            function result(){
                var count = 0;
                if (res[0] == 0 && res[1] == 0 && res[2] == 0 && res[3] == 1){
                    count = -1;
                }
                else {
                    for (let i =0; i < 4; i++){
                        count += res[i];
                    }
                    if (count == 0){
                        count = 5;
                    }
                }
                return count;
            }
            
            function show_result(){
                let x = document.getElementById("resultBox");
                var count = 0;
                if (res[0] == 0 && res[1] == 0 && res[2] == 0 && res[3] == 1){
                    count = -1;
                }
                else {
                    for (let i =0; i < 4; i++){
                        count += res[i];
                    }
                    if (count == 0){
                        count = 5;
                    }
                }
                
                switch (count){
                    case 1:
                        x.innerHTML = "Result is: Do(1 Space)";
                        break;
                    case 2:
                        x.innerHTML = "Result is: Gae(2 Spaces)";
                        break;  
                    case 3:
                        x.innerHTML = "Result is: Geol(3 Spaces)";
                        break;
                    case 4:
                        x.innerHTML = "Result is: Yut(4 Spaces)";
                        break;
                    case -1:
                        x.innerHTML = "Result is: Back Do(-1 Space)";
                        break;
                    case 5:
                        x.innerHTML = "Result is: Mo(5 Spaces)";
                        break;
                }
                
                
                
                /*
                switch (count){
                    case 1:
                        x[0].innerHTML = "Result is: Do(1 Space)";
                        break;
                    case 2:
                        x[0].innerHTML = "Result is: Gae(2 Spaces)";
                        break;  
                    case 3:
                        x[0].innerHTML = "Result is: Geol(3 Spaces)";
                        break;
                    case 4:
                        x[0].innerHTML = "Result is: Yut(4 Spaces)";
                        break;
                    case -1:
                        x[0].innerHTML = "Result is: Back Do(-1 Space)";
                        break;
                    case 5:
                        x[0].innerHTML = "Result is: Mo(5 Spaces)";
                        break;
                }
                */
                
                    
            }
           
            function roll(){
                  //yutb = one with -1
                    let yut, yutB;
                    // rng display heads or tail depending on result
                    //roll animation??
                    
                    for (let i =0; i < 3; i++){
                        yut = Math.floor(Math.random() * 2);
                        if (yut == 0){
                            var img = document.createElement("img");
                            img.src= "head.png";
                            img.style.height = "245px";
                            img.style.width = "80px";
                            //display on a table
                            let x = document.getElementById("yut").rows[0].cells;
                            x[i+1].innerHTML = "";
                            x[i+1].appendChild(img);
                            res[i] = 0;
                        }
                        else{
                            var img = document.createElement("img");
                            img.src= "tail.png";
                            img.style.height = "245px";
                            img.style.width = "80px";
                            let x = document.getElementById("yut").rows[0].cells;
                            x[i+1].innerHTML = "";
                            x[i+1].appendChild(img);
                            res[i] = 1;
                        }
                    }
                    
                    yutB = Math.floor(Math.random() * 2);
                     if (yutB == 0){
                        var img = document.createElement("img");
                        img.src= "head.png";
                        img.style.height = "245px";
                        img.style.width = "80px";
                        let x = document.getElementById("yut").rows[0].cells;
                        x[4].innerHTML = "";
                        x[4].appendChild(img);
                        res[3] = 0;
                    }
                    else{
                        var img = document.createElement("img");
                        img.src= "back.png";
                        img.style.height = "245px";
                        img.style.width = "80px";
                        let x = document.getElementById("yut").rows[0].cells;
                        x[4].innerHTML = "";
                        x[4].appendChild(img);
                        res[3] = 1;
                    }
            }
        </script>
         <!--Modal for rolling-->
        <script>
            
            var posit = {left: '', top: ''};

            //postion for each circle
            function pos(posi){
                switch (posi){
                    case 11:
                        posit.left = '70px';
                        posit.top= '190px';
                        break;
                    case 10:
                        posit.left = '190px';
                        posit.top= '180px';
                        break;
                    case 9:
                        posit.left = '315px';
                        posit.top= '180px';
                        break;
                    case 8:
                        posit.left = '440px';
                        posit.top= '180px';
                        break;
                    case 7:
                        posit.left = '565px';
                        posit.top= '180px';
                        break;
                    case 6:
                        posit.left = '690px';
                        posit.top= '190px';
                        break;
                    case 12:
                        posit.left = '70px';
                        posit.top= '320px';
                        break;
                    case 26:
                        posit.left = '190px';
                        posit.top= '295px';
                        break;
                    case 21:
                        posit.left = '580px';
                        posit.top= '295px';
                        break;
                    case 5:
                        posit.left = '695px';
                        posit.top= '325px';
                        break;
                    case 13:
                        posit.left = '65px';
                        posit.top= '445px';
                        break;
                    case 27:
                        posit.left = '290px';
                        posit.top= '405px';
                        break;
                    case 22:
                        posit.left = '490px';
                        posit.top= '405px';
                        break;
                    case 4:
                        posit.left = '695px';
                        posit.top= '445px';
                        break;
                    case 14:
                        posit.left = '65px';
                        posit.top= '575px';
                        break;
                    case 24:
                        posit.left = '290px';
                        posit.top= '595px';
                        break;
                    case 23:
                        posit.left = '385px';
                        posit.top= '505px';
                        break;
                    case 28:
                        posit.left = '490px';
                        posit.top= '595px';
                        break;
                    case 3:
                        posit.left = '695px';
                        posit.top= '575px';
                        break;
                    case 15:
                        posit.left = '65px';
                        posit.top= '695px';
                        break;
                    case 25:
                        posit.left = '190px';
                        posit.top= '695px';
                        break;
                    case 29:
                        posit.left = '580px';
                        posit.top= '695px';
                        break;
                    case 2:
                        posit.left = '695px';
                        posit.top= '695px';
                        break;
                    case 16:
                        posit.left = '70px';
                        posit.top= '815px';
                        break;
                    case 17:
                        posit.left = '190px';
                        posit.top= '805px';
                        break;
                    case 18:
                        posit.left = '315px';
                        posit.top= '805px';
                        break;
                    case 19:
                        posit.left = '440px';
                        posit.top= '805px';
                        break;
                    case 20:
                        posit.left = '565px';
                        posit.top= '805px';
                        break;
                    case 1:
                        posit.left = '690px';
                        posit.top= '810px';
                        break;
                }

            }
           
        
        </script>
        <!--Modal for How to Play-->
        <script>
            
            // Get the modal
            var modal = document.getElementById("howtoplaymodal");

            // Get the button that opens the modal
            var btn = document.getElementById("howtoplay");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks on the button, open the modal
            btn.onclick = function() {
            modal.style.display = "block";
            }

            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
            modal.style.display = "none";
             }

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                }
            }
            
            
            
            /*
            
            
               // Get the modal
            var modal = document.getElementById("repeatModal");

            // Get the button that opens the modal
            var btn = document.getElementById("howtoplay");


            // When the user clicks on the button, open the modal
            btn.onclick = function() {
            modal.style.display = "block";
            }*/

    </script>
        <!-- putting pieces into certain circle -->
        <div id="test">
        <script> 
            function move(p,m){
                var img = document.getElementById(m);
                img.style.position = "absolute";
                img.style.zIndex = 3;
                img.style.width= "30px"
                img.style.height="30px"
                pos(p);
                img.style.left= posit.left;
                img.style.top = posit.top;
                var src = document.getElementById("test");
                src.appendChild(img);
            }
            
        </script>
        </div>
        
        <!-- pieces left over -->
        <table id="start" style="position: absolute; left: 850px; top: 250px; width: 180px;">
            <tr>
                <th>Team</th>
                <th colspan="4">Mal Left</th>
            </tr>
            <tr>
                <td>
                    <img src="red.png" alt="opps something went wrong" style="width:30px;height:30px">
                </td>
                <td>
                    <div id="r1" class="container">
                        <img src="red.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">1</div>
                    </div>
                </td>
                <td>
                    <div id="r2" class="container">
                        <img src="red.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">2</div>
                    </div>
                </td>
                <td>
                    <div id="r3" class="container">
                        <img src="red.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">3</div>
                    </div>
                </td>
                <td>
                    <div id="r4" class="container">
                        <img src="red.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">4</div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <img src="blue.png" alt="opps something went wrong" style="width:30px;height:30px">
                </td>
                <td>
                    <div id="b1" class="container">
                        <img src="blue.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">1</div>
                    </div>
                </td>
                <td>
                    <div id="b2" class="container">
                        <img src="blue.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">2</div>
                    </div>
                </td>
                <td>
                    <div id="b3" class="container">
                        <img src="blue.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">3</div>
                    </div>
                </td>
                <td>
                    <div id="b4" class="container">
                        <img src="blue.png" alt="opps something went wrong" style="width:30px;height:30px">
                        <div class="imgNum">4</div>
                    </div>
                </td>
            </tr>
        </table>
        
        <!-- pieces finished -->
        <table id="finish" style="position: absolute; left: 1050px; top: 250px; width: 180px;">
            <tr>
                <th>Team</th>
                <th colspan="4">Mal Finished</th>
            </tr>
            <tr>
                <td>
                    <img src="red.png" alt="opps something went wrong" style="width:30px;height:30px">
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>
                    <img src="blue.png" alt="opps something went wrong" style="width:30px;height:30px">
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
        
        
        <!-- dice table -->
        <table id="yut" style="position: absolute; left: 850px; top: 400px;">
            <tr>
                <th>Yut</th>
                <td>
                    <img src="question.png" alt="opps something went wrong" style="width:80px;height:245px">

                </td>
                <td>
                    <img src="question.png" alt="opps something went wrong" style="width:80px;height:245px">
                </td>
                  <td>
                    <img src="question.png" alt="opps something went wrong" style="width:80px;height:245px">

                </td>
                <td>
                    <img src="question.png" alt="opps something went wrong" style="width:80px;height:245px">
            </tr>
        </table>
        
        <!--Map:Circle-->
        <div>
            <img src="circle.png" alt="opps something went wrong" class="sb" style="left: 50px;top: 165px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 180px;top: 165px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 303px;top: 165px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 430px;top: 165px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 555px;top: 165px;">
            <img src="circle.png" alt="opps something went wrong" class="sb" style="left: 670px;top: 165px;">
        
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 55px;top: 310px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 55px;top: 430px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 55px;top: 560px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 55px;top: 680px;">
            <img src="circle.png" alt="opps something went wrong" class="sb" style="left: 50px;top: 790px;">
            
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 685px;top: 310px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 685px;top: 430px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 685px;top: 560px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 685px;top: 680px;">
            <img src="circle.png" alt="opps something went wrong" class="sb" style="left: 670px;top: 790px;">
            
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 180px;top: 790px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 303px;top: 790px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 430px;top: 790px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 555px;top: 790px;">
            
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 180px;top: 280px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 180px;top: 680px;">
            
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 280px;top: 390px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 280px;top: 580px;">
            
            <img src="circle.png" alt="opps something went wrong" class="sb" style="left: 365px;top: 480px;">
            
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 570px;top: 280px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 570px;top: 680px;">
            
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 480px;top: 390px;">
            <img src="circle.png" alt="opps something went wrong" class="s1" style="left: 480px;top: 580px;">
        </div>
        
        <!--Map:Arrow-->
        <div> 
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="left: 633px; top: 820px">
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(270deg); left: 703px; top: 760px">
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(45deg); left: 640px; top: 760px">
            
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(180deg); left: 630px; top: 190px">
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(135deg); left: 640px; top: 260px">
            
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(90deg); left: 75px; top: 280px; height: 17px;">
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(45deg); left: 150px; top: 260px">
            
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="transform:rotate(135deg); left: 150px; top: 760px">
            <img src="arrow.png" alt="opps something went wrong" class="arrow" style="left: 150px; top:820px; width: 25px;">
        </div>
     
        
        
    </body>